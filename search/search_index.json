{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"cooking_auth A user authentication microservice for an online cooking forum. Check out the project's documentation . Prerequisites Docker VS Code Dev Containers Local Development with VSCode and Devcontainers In VSCode press F1 to bring up the Command Palette , type in >Dev Containers: Rebuild and Reopen in Container . Then you can debug django from VSCode from the Run and Debug panel. When using git inside the Devcontainer you are going to need to configure it to use the git credentials on host your machine as described here To install pre-commit hooks, just run from the VSCode integrated terminal pre-commit install the first time you open the project. It will install the pre-commit hooks automatically. Run locally without VSCode Start the dev server for local development: docker-compose up Run a command inside the docker container: docker-compose run --rm web [command] Accessing the development server The django admin page is located at http://localhost:7070/admin/ Documentation is at http://localhost:7071/api/users/ or you can find the hosted version here Swagger ui is at http://localhost:7070/api/v1/schema/swagger-ui/#/ Quick curl examples Create a user: Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/users/' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -H 'X-CSRFTOKEN: wGtmTApd89fKOx1mraf7DzPAYEEDz2fqaHVJMeLJlhlnMbApuTo7y1jNsGXWy2yX' \\ -d '{ \"username\": \"test\", \"password\": \"test1234\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"email\": \"user@example.com\", \"has_2fa\": true }' Response: { \"id\": \"1bde4e38-968e-4853-865b-2395ceb3a587\", \"username\": \"test\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"email\": \"user@example.com\", \"has_2fa\": true } Login as user: Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/login/' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -d '{ \"password\": \"test1234\", \"email\": \"user@example.com\" }' Response: { \"body\": \"Login via email OTP\", \"_links\": [ { \"href\": \"/api/v1/login/1bde4e38-968e-4853-865b-2395ceb3a587/otp/\", \"method\": \"POST\", \"body\": { \"code\": { \"type\": \"str\" } } } ] } Login via OTP Use OTP (which you can find in stdout) and the _links[0].href from the previous response. Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/login/1bde4e38-968e-4853-865b-2395ceb3a587/otp' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -d '{ \"code\": \"hvu1j1\" }' Response: { \"message\": \"Login successful\", \"token\": { \"refresh\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTcyNjgyOTY3MiwiaWF0IjoxNzI2NzQzMjcyLCJqdGkiOiIyYzgyMmE4MzFkNmI0OWU0Yjg5NzkxYTJjOTFkNDdiMiIsInVzZXJfaWQiOiIxYmRlNGUzOC05NjhlLTQ4NTMtODY1Yi0yMzk1Y2ViM2E1ODcifQ.SSb2EFGOWIJfRUqE_rkTvw76rdP2XWJCrRGCixA80YA\", \"access\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzI2NzQzNTcyLCJpYXQiOjE3MjY3NDMyNzIsImp0aSI6ImRiMTNlNWMyYWJkMzQ1NGM4ZmQ5NWIzMDMyMWM1YzU1IiwidXNlcl9pZCI6IjFiZGU0ZTM4LTk2OGUtNDg1My04NjViLTIzOTVjZWIzYTU4NyJ9.x6zoYVqHwFHLYUqeY_wSVtODQhXpChsKioEjznv7VlQ\" } } Use the token to access user info: Request: curl -X 'GET' \\ 'http://localhost:7070/api/v1/users/1bde4e38-968e-4853-865b-2395ceb3a587/' \\ -H 'accept: application/json' \\ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzI2NzQzNTcyLCJpYXQiOjE3MjY3NDMyNzIsImp0aSI6ImRiMTNlNWMyYWJkMzQ1NGM4ZmQ5NWIzMDMyMWM1YzU1IiwidXNlcl9pZCI6IjFiZGU0ZTM4LTk2OGUtNDg1My04NjViLTIzOTVjZWIzYTU4NyJ9.x6zoYVqHwFHLYUqeY_wSVtODQhXpChsKioEjznv7VlQ' Response: { \"id\": \"1bde4e38-968e-4853-865b-2395ceb3a587\", \"username\": \"test\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"has_2fa\": true }","title":"Home"},{"location":"#cooking_auth","text":"A user authentication microservice for an online cooking forum. Check out the project's documentation .","title":"cooking_auth"},{"location":"#prerequisites","text":"Docker VS Code Dev Containers","title":"Prerequisites"},{"location":"#local-development-with-vscode-and-devcontainers","text":"In VSCode press F1 to bring up the Command Palette , type in >Dev Containers: Rebuild and Reopen in Container . Then you can debug django from VSCode from the Run and Debug panel. When using git inside the Devcontainer you are going to need to configure it to use the git credentials on host your machine as described here To install pre-commit hooks, just run from the VSCode integrated terminal pre-commit install the first time you open the project. It will install the pre-commit hooks automatically.","title":"Local Development with VSCode and Devcontainers"},{"location":"#run-locally-without-vscode","text":"Start the dev server for local development: docker-compose up Run a command inside the docker container: docker-compose run --rm web [command]","title":"Run locally without VSCode"},{"location":"#accessing-the-development-server","text":"The django admin page is located at http://localhost:7070/admin/ Documentation is at http://localhost:7071/api/users/ or you can find the hosted version here Swagger ui is at http://localhost:7070/api/v1/schema/swagger-ui/#/","title":"Accessing the development server"},{"location":"#quick-curl-examples","text":"","title":"Quick curl examples"},{"location":"#create-a-user","text":"Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/users/' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -H 'X-CSRFTOKEN: wGtmTApd89fKOx1mraf7DzPAYEEDz2fqaHVJMeLJlhlnMbApuTo7y1jNsGXWy2yX' \\ -d '{ \"username\": \"test\", \"password\": \"test1234\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"email\": \"user@example.com\", \"has_2fa\": true }' Response: { \"id\": \"1bde4e38-968e-4853-865b-2395ceb3a587\", \"username\": \"test\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"email\": \"user@example.com\", \"has_2fa\": true }","title":"Create a user:"},{"location":"#login-as-user","text":"Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/login/' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -d '{ \"password\": \"test1234\", \"email\": \"user@example.com\" }' Response: { \"body\": \"Login via email OTP\", \"_links\": [ { \"href\": \"/api/v1/login/1bde4e38-968e-4853-865b-2395ceb3a587/otp/\", \"method\": \"POST\", \"body\": { \"code\": { \"type\": \"str\" } } } ] }","title":"Login as user:"},{"location":"#login-via-otp","text":"Use OTP (which you can find in stdout) and the _links[0].href from the previous response. Request: curl -X 'POST' \\ 'http://localhost:7070/api/v1/login/1bde4e38-968e-4853-865b-2395ceb3a587/otp' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/json' \\ -d '{ \"code\": \"hvu1j1\" }' Response: { \"message\": \"Login successful\", \"token\": { \"refresh\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTcyNjgyOTY3MiwiaWF0IjoxNzI2NzQzMjcyLCJqdGkiOiIyYzgyMmE4MzFkNmI0OWU0Yjg5NzkxYTJjOTFkNDdiMiIsInVzZXJfaWQiOiIxYmRlNGUzOC05NjhlLTQ4NTMtODY1Yi0yMzk1Y2ViM2E1ODcifQ.SSb2EFGOWIJfRUqE_rkTvw76rdP2XWJCrRGCixA80YA\", \"access\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzI2NzQzNTcyLCJpYXQiOjE3MjY3NDMyNzIsImp0aSI6ImRiMTNlNWMyYWJkMzQ1NGM4ZmQ5NWIzMDMyMWM1YzU1IiwidXNlcl9pZCI6IjFiZGU0ZTM4LTk2OGUtNDg1My04NjViLTIzOTVjZWIzYTU4NyJ9.x6zoYVqHwFHLYUqeY_wSVtODQhXpChsKioEjznv7VlQ\" } }","title":"Login via OTP"},{"location":"#use-the-token-to-access-user-info","text":"Request: curl -X 'GET' \\ 'http://localhost:7070/api/v1/users/1bde4e38-968e-4853-865b-2395ceb3a587/' \\ -H 'accept: application/json' \\ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzI2NzQzNTcyLCJpYXQiOjE3MjY3NDMyNzIsImp0aSI6ImRiMTNlNWMyYWJkMzQ1NGM4ZmQ5NWIzMDMyMWM1YzU1IiwidXNlcl9pZCI6IjFiZGU0ZTM4LTk2OGUtNDg1My04NjViLTIzOTVjZWIzYTU4NyJ9.x6zoYVqHwFHLYUqeY_wSVtODQhXpChsKioEjznv7VlQ' Response: { \"id\": \"1bde4e38-968e-4853-865b-2395ceb3a587\", \"username\": \"test\", \"first_name\": \"prova\", \"last_name\": \"provata\", \"has_2fa\": true }","title":"Use the token to access user info:"},{"location":"api/authentication/","text":"Authentication For clients to authenticate, the token key should be included in the Authorization HTTP header. The key should be prefixed by the string literal \"Bearer\", with whitespace separating the two strings. For example: Authorization: Bearer eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV The curl command line tool may be useful for testing token authenticated APIs. For example: curl -X GET http://127.0.0.1:8000/api/v1/users/ -H 'Authorization: Bearer eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV' Retrieving Tokens Authorization tokens are issued and returned when a user logs in. Upon registration a user can specify wether to enroll for 2 factor authentication by specifying has_2fa: True in the registration request. Login Request without 2FA : POST /api/v1/login/ Parameters: Name Type Description username string The user's username password string The user's password Response : { \"message\": \"Login successful\", \"token\" : { \"access\": \"eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV\", \"refresh\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2Vu\" } } Login Request with 2FA -- First Step : POST /api/v1/login/ Parameters: Name Type Description username string The user's username password string The user's password Response : { \"message\": \"Login via email OTP\", \"_links\" : { \"href\": \"/api/v1/login/:user_id/otp/\", \"method\": \"POST\", \"body\": { \"code\": { \"type\": \"str\" } }, } } Login Request with 2FA -- Second Step : POST /api/v1/login/:user_id/otp Parameters: Name Type Description code string The OTP received via mail Response : { \"message\": \"Login successful\", \"token\" : { \"access\": \"eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV\", \"refresh\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2Vu\" } }","title":"Authentication"},{"location":"api/authentication/#authentication","text":"For clients to authenticate, the token key should be included in the Authorization HTTP header. The key should be prefixed by the string literal \"Bearer\", with whitespace separating the two strings. For example: Authorization: Bearer eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV The curl command line tool may be useful for testing token authenticated APIs. For example: curl -X GET http://127.0.0.1:8000/api/v1/users/ -H 'Authorization: Bearer eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV'","title":"Authentication"},{"location":"api/authentication/#retrieving-tokens","text":"Authorization tokens are issued and returned when a user logs in. Upon registration a user can specify wether to enroll for 2 factor authentication by specifying has_2fa: True in the registration request. Login Request without 2FA : POST /api/v1/login/ Parameters: Name Type Description username string The user's username password string The user's password Response : { \"message\": \"Login successful\", \"token\" : { \"access\": \"eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV\", \"refresh\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2Vu\" } } Login Request with 2FA -- First Step : POST /api/v1/login/ Parameters: Name Type Description username string The user's username password string The user's password Response : { \"message\": \"Login via email OTP\", \"_links\" : { \"href\": \"/api/v1/login/:user_id/otp/\", \"method\": \"POST\", \"body\": { \"code\": { \"type\": \"str\" } }, } } Login Request with 2FA -- Second Step : POST /api/v1/login/:user_id/otp Parameters: Name Type Description code string The OTP received via mail Response : { \"message\": \"Login successful\", \"token\" : { \"access\": \"eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2VucyIsImlzcyI6ImJqaElSak0xY1hwYWEyMXpkV\", \"refresh\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJZekV6TUdkb01ISm5PSEJpT0cxaWJEaHlOVEE9IiwicmVzcG9uc2VfdHlwZSI6ImNvZGUiLCJzY29wZSI6ImludHJvc2NwZWN0X3Rva2VucywgcmV2b2tlX3Rva2Vu\" } }","title":"Retrieving Tokens"},{"location":"api/users/","text":"Users Supports registering, viewing, and updating user accounts. Register a new user account Request : POST /users/ Parameters: Name Type Required Description username string Yes The username for the new user. password string Yes The password for the new user account. first_name string No The user's given name. last_name string No The user's family name. email string Yes The user's email address. has_2fa bool No Wether to use 2 factor authentication Note: Not Authorization Protected Response : Content-Type application/json 201 Created { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false } Get a user's profile information Request : GET /users/:id Parameters: Note: Authorization Protected Response : Content-Type application/json 200 OK { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false } Update your profile information Request : PUT/PATCH /users/:id Parameters: Name Type Description first_name string The first_name of the user object. last_name string The last_name of the user object. email string The user's email address. has_2fa bool Wether the user uses 2 factor authentication Note: All parameters are optional Authorization Protected Response : Content-Type application/json 200 OK { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false }","title":"Users"},{"location":"api/users/#users","text":"Supports registering, viewing, and updating user accounts.","title":"Users"},{"location":"api/users/#register-a-new-user-account","text":"Request : POST /users/ Parameters: Name Type Required Description username string Yes The username for the new user. password string Yes The password for the new user account. first_name string No The user's given name. last_name string No The user's family name. email string Yes The user's email address. has_2fa bool No Wether to use 2 factor authentication Note: Not Authorization Protected Response : Content-Type application/json 201 Created { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false }","title":"Register a new user account"},{"location":"api/users/#get-a-users-profile-information","text":"Request : GET /users/:id Parameters: Note: Authorization Protected Response : Content-Type application/json 200 OK { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false }","title":"Get a user's profile information"},{"location":"api/users/#update-your-profile-information","text":"Request : PUT/PATCH /users/:id Parameters: Name Type Description first_name string The first_name of the user object. last_name string The last_name of the user object. email string The user's email address. has_2fa bool Wether the user uses 2 factor authentication Note: All parameters are optional Authorization Protected Response : Content-Type application/json 200 OK { \"id\": \"6d5f9bae-a31b-4b7b-82c4-3853eda2b011\", \"username\": \"richard\", \"first_name\": \"Richard\", \"last_name\": \"Hendriks\", \"email\": \"richard@piedpiper.com\", \"has_2fa\": false }","title":"Update your profile information"}]}